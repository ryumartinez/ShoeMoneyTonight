import{d as C,a as y,b as P,y as B,c as d,e as i,f as t,g as a,h as f,F as I,j as N,t as r,k as T,l as _,z as F}from"./index-BM_g7QBN.js";import{_ as V,a as j}from"./ChevronLeftIcon-DxOCReAT.js";import{_ as q}from"./CheckoutProgress-DTQRSyl6.js";import{u as D}from"./catalog-BG7V8Pt6.js";import{m as u,p as L}from"./index-YLLvB746.js";import{s as S}from"./array-CBn_IkKV.js";const $={class:"w-full sm:w-4/5 lg:w-2/3 mx-auto"},z={class:"mb-4"},E=t("div",{class:"italic text-sm text-slate-500"},"Free Shipping and Prices include Taxes",-1),M={class:"flex justify-end gap-2"},Q={class:"rounded shadow-xl p-1"},R={class:"table table-sm table-fixed"},U=t("tr",{class:"border-b border-slate-500"},[t("th",{class:"w-8"}),t("th",null,"Product"),t("th",{class:"w-24 text-center"},"Quantity"),t("th",{class:"w-24 text-center"},"Price"),t("th",{class:"w-24 text-center"},"Discount"),t("th",{class:"text-right w-24"},"Line Total")],-1),A={class:"text-slate-600"},G=["onClick"],H={class:"whitespace-normal"},J={class:"text-center"},K={class:"text-center"},O={class:"text-center"},W={class:"text-right"},X={class:"text-slate-600"},Y=t("td",{colspan:"5"},null,-1),Z={class:"text-right border-t border-b border-slate-600"},it=C({__name:"Checkout",setup(tt){const e=y(),p=D(),l=T();P(async()=>{for(let s=0;s<e.items.length;++s)if(!e.items[s].product){const o=p.products.find(c=>c.id===e.items[s].productId);if(o)e.items[s].product=o;else{const c=await p.loadProduct(e.items[s].productId);c&&(e.items[s].product=c)}}});function m(s){return s.price*s.quantity*(1-s.discount)}function x(s){e.items.splice(e.items.findIndex(o=>o.id===s.id),1),e.items.length===0&&l.push("/")}const b=B(()=>S(e.items,s=>m(s)));function g(){e.processCheckout()&&l.push("/customerInfo")}return(s,o)=>{const c=q,w=V,v=j,k=F;return _(),d("div",null,[i(c,{stage:1}),t("div",$,[t("div",z,[E,t("div",M,[t("button",{onClick:o[0]||(o[0]=n=>a(l).back()),class:"whitespace-nowrap btn-sm btn btn-ghost"},[i(w),f(" Back")]),t("button",{onClick:g,class:"whitespace-nowrap btn btn-sm btn-success"},[i(v),f(" Next")])])]),t("div",Q,[t("table",R,[t("thead",null,[U,(_(!0),d(I,null,N(a(e).items,n=>{var h;return _(),d("tr",A,[t("td",null,[t("button",{onClick:st=>x(n)},[i(k,{class:"text-red-900/50 hover:text-red-900 w-6 h-6"})],8,G)]),t("td",H,r(((h=n.product)==null?void 0:h.title)??"Unknown"),1),t("td",J,r(n.quantity),1),t("td",K,r(a(u)(n.price)),1),t("td",O,r(a(L)(n.discount)),1),t("td",W,r(a(u)(m(n))),1)])}),256)),t("tr",X,[Y,t("td",Z,r(a(u)(b.value)),1)])])])])])])}}});export{it as default};
